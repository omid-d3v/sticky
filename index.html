<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Digital Sticky Notes Board</title>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <!-- GSAP CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" integrity="sha512-k3UkHF47YI6eEgDANu/ZKmM/A2399gSZl+8cfxQzPWfeYzuzKoHX8y5YWfcoVj31VojL5+raBpifq0p8/njyGA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      background: #333;
      color: #fff;
      width: 100%;
      padding: 1rem;
      text-align: center;
    }
    #note-form {
      background: #fff;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 400px;
    }
    #note-form input,
    #note-form textarea {
      width: 100%;
      padding: 0.5rem;
      margin: 0.5rem 0;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    #note-form button {
      background: #28a745;
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
    #notes-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
      max-width: 1000px;
    }
    .note {
      background: #fff;
      width: 200px;
      min-height: 150px;
      margin: 1rem;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    .note img {
      max-width: 100%;
      border-radius: 4px;
      margin-bottom: 0.5rem;
    }
    .note .name {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Digital Sticky Notes Board</h1>
  </header>

  <form id="note-form">
    <input type="text" id="name" placeholder="Your Name" required />
    <textarea id="message" placeholder="Your Message" rows="3" required></textarea>
    <input type="text" id="imageURL" placeholder="Image URL (optional)" />
    <button type="submit">Add Sticky Note</button>
  </form>

  <div id="notes-container"></div>

  <script>
    // TODO: جایگزین کن با تنظیمات پروژه‌ی خودت از Firebase Console
    const firebaseConfig = {
        apiKey: "AIzaSyBux-_Rlnw0nIv-F1dSdcRAbvLPSSTpZ8I",
  authDomain: "sticky-e06b0.firebaseapp.com",
  projectId: "sticky-e06b0",
  storageBucket: "sticky-e06b0.firebasestorage.app",
  messagingSenderId: "632807722451",
  appId: "1:632807722451:web:be9d003c442eb14987f326"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const noteForm = document.getElementById('note-form');
    const notesContainer = document.getElementById('notes-container');

    noteForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const name = document.getElementById('name').value.trim();
      const message = document.getElementById('message').value.trim();
      const imageURL = document.getElementById('imageURL').value.trim();

      if (name && message) {
        // Add note to Firestore
        await db.collection('stickyNotes').add({
          name,
          message,
          imageURL: imageURL || null,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        // Clear form
        noteForm.reset();
      }
    });

    // Listen for new notes
    db.collection('stickyNotes').orderBy('timestamp', 'desc').onSnapshot((snapshot) => {
      notesContainer.innerHTML = '';
      snapshot.forEach((doc, index) => {
        const data = doc.data();
        createNoteElement(data, index);
      });
    });

    function createNoteElement(data, index) {
      const noteEl = document.createElement('div');
      noteEl.classList.add('note');

      if (data.imageURL) {
        const imgEl = document.createElement('img');
        imgEl.src = data.imageURL;
        noteEl.appendChild(imgEl);
      }

      const nameEl = document.createElement('div');
      nameEl.classList.add('name');
      nameEl.textContent = data.name;
      noteEl.appendChild(nameEl);

      const msgEl = document.createElement('div');
      msgEl.classList.add('message');
      msgEl.textContent = data.message;
      noteEl.appendChild(msgEl);

      notesContainer.appendChild(noteEl);

      // Animate with GSAP: slide-in from bottom with stagger
      gsap.from(noteEl, {
        duration: 0.6,
        y: 50,
        opacity: 0,
        ease: 'power2.out',
        delay: index * 0.1
      });
    }
  </script>
</body>
</html>
